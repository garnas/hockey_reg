{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
    <h1>Team Roster</h1>
    <h2>{{ team.teamname }}</h2>
    {% if team.players is not empty %}
        <div class="table-responsive">
            <table class="table table-striped align-middle">
                <thead>
                <tr>
                    <th class="text-center">ID</th>
                    <th>Name</th>
                    <th class="text-center">Remove</th>
                </tr>
                </thead>
                {% for player in team.players %}
                    <tr>
                        <td class="text-center">
                            {{ player.id }}
                        </td>
                        <td>
                            {{ player.givenName }} {{ player.familyName }}
                        </td>
                        <td class="text-center">
                            {{ form_start(removePlayerForm, {
                                'action': path('app_remove_player', {'playerId': player.id}),
                                'method': 'DELETE',
                                'attr': { 'onsubmit': "return confirm('Remove " ~ player.givenName  ~ "?');"}
                            }) }}
                                <button type="submit" class="btn"><i class="bi bi-x-circle"></i></button>
                            {{ form_end(removePlayerForm) }}
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    {% endif %}
    <div>
        {{ form_start(addPlayerForm) }}

        {{ form_row(addPlayerForm.givenName) }}
        {{ form_row(addPlayerForm.familyName) }}

        <button type="submit" class="btn btn-primary">Add Player</button>
        {{ form_end(addPlayerForm) }}
    </div>

    <div>
        <h1>Opponents</h1>
        {% for opponent in teams|filter(team => team.tournamentLevel == filter %}

        {% endfor %}
    </div>
{% endblock %}
